"use strict";const inputEl=document.querySelector("#series"),btnEl=document.querySelector(".btn"),list=document.querySelector(".series__list"),favList=document.querySelector(".fav__list"),favSectionEl=document.querySelector(".fav_section");let arrFav=[];function searchMovie(){const t=inputEl.value;fetch("http://api.tvmaze.com/search/shows?q="+t).then(t=>t.json()).then(t=>{console.log(t),list.innerHTML="";for(let e=0;e<t.length;e++){const a=t[e].show.name,c=t[e].show.image,n=document.createElement("li");n.setAttribute("class","item"),list.appendChild(n),n.addEventListener("click",addFavorite);const s=document.createElement("h2");s.setAttribute("class","title-series");const i=document.createTextNode(a);if(s.appendChild(i),n.appendChild(s),null===c){const t=document.createElement("img");t.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?text=TV"),t.setAttribute("alt",a),t.setAttribute("class","image"),n.appendChild(t)}else{const c=t[e].show.image.medium,s=document.createElement("img");s.setAttribute("src",c),s.setAttribute("alt",a),s.setAttribute("class","image"),n.appendChild(s)}}})}function addFavorite(t){t.currentTarget.classList.toggle("selected"),addToFavList(),addLocalStorage()}function addToFavList(){const t={};t.title=event.currentTarget.children[0].innerText,t.src=event.currentTarget.children[1].src,arrFav.push(t);const e=document.createElement("li");e.setAttribute("class","fav-item"),favList.appendChild(e);const a=document.createElement("h3");a.setAttribute("class","fav_title");const c=document.createTextNode(t.title);a.appendChild(c),e.appendChild(a);const n=document.createElement("img");n.setAttribute("src",t.src),n.setAttribute("class","fav_img"),n.setAttribute("alt",t.title),e.appendChild(n)}function addLocalStorage(){localStorage.setItem("arrFavString",JSON.stringify(arrFav))}function getLocalStorage(){const t=localStorage.getItem("arrFavString");if(t){const e=JSON.parse(t);console.log(e[0].title);for(let t=0;t<e.length;t++){const a=document.createElement("li");a.setAttribute("class","fav-item"),favList.appendChild(a);const c=document.createElement("h3");c.setAttribute("class","fav_title");const n=document.createTextNode(e[t].title);c.appendChild(n),a.appendChild(c);const s=document.createElement("img");s.setAttribute("src",e[t].src),s.setAttribute("class","fav_img"),s.setAttribute("alt",e[t].title),a.appendChild(s)}return e}}function reloadPage(){getLocalStorage()}btnEl.addEventListener("click",searchMovie),reloadPage();