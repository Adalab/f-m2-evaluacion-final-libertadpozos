"use strict";const inputEl=document.querySelector("#series"),btnEl=document.querySelector(".btn"),list=document.querySelector(".series__list"),favList=document.querySelector(".fav__list"),favSectionEl=document.querySelector(".fav_section");let arrFav=[];function searchMovie(){const t=inputEl.value;fetch("http://api.tvmaze.com/search/shows?q="+t).then(t=>t.json()).then(t=>{console.log(t),list.innerHTML="";for(let e=0;e<t.length;e++){const n=t[e].show.name;if(null===t[e].show.image){const t=document.createElement("li");t.setAttribute("class","item"),list.appendChild(t),t.addEventListener("click",addFavorite);const e=document.createElement("h2");e.setAttribute("class","title-series");const c=document.createTextNode(n);e.appendChild(c),t.appendChild(e);const a=document.createElement("img");a.setAttribute("src","https://via.placeholder.com/210x295/ffffff/666666/?text=TV"),a.setAttribute("alt",n),t.appendChild(a)}else{const c=t[e].show.image.medium,a=document.createElement("li");a.setAttribute("class","item"),list.appendChild(a),a.addEventListener("click",addFavorite);const s=document.createElement("h2");s.setAttribute("class","title-series");const i=document.createTextNode(n);s.appendChild(i),a.appendChild(s);const r=document.createElement("img");r.setAttribute("src",c),r.setAttribute("alt",n),a.appendChild(r)}}})}function addFavorite(t){t.currentTarget.classList.toggle("selected"),addToFavList(),addLocalStorage()}function addToFavList(){const t={};t.title=event.currentTarget.children[0].innerText,t.src=event.currentTarget.children[1].src,arrFav.push(t);const e=document.createElement("li");e.setAttribute("class","fav-item"),favList.appendChild(e);const n=document.createElement("h3");n.setAttribute("class","fav_title");const c=document.createTextNode(t.title);n.appendChild(c),e.appendChild(n);const a=document.createElement("img");a.setAttribute("src",t.src),a.setAttribute("class","fav_img"),a.setAttribute("alt",t.title),e.appendChild(a)}function addLocalStorage(){localStorage.setItem("arrFavString",JSON.stringify(arrFav))}function getLocalStorage(){const t=localStorage.getItem("arrFavString");if(t){const e=JSON.parse(t);console.log(e[0].title);for(let t=0;t<e.length;t++){const n=document.createElement("li");n.setAttribute("class","fav-item"),favList.appendChild(n);const c=document.createElement("h3");c.setAttribute("class","fav_title");const a=document.createTextNode(e[t].title);c.appendChild(a),n.appendChild(c);const s=document.createElement("img");s.setAttribute("src",e[t].src),s.setAttribute("class","fav_img"),s.setAttribute("alt",e[t].title),n.appendChild(s)}return e}}function reloadPage(){getLocalStorage()}btnEl.addEventListener("click",searchMovie),reloadPage();